<!DOCTYPE html>
<html>
<head>
  <title>Send to Discord</title>
</head>
<body>
  <h2>Send Message to Discord</h2>
  <form id="discordForm">
    <input type="password" id="password" placeholder="Enter Channel Password (discord/game)" required><br><br>
    
    <input type="text" id="username" placeholder="Your Name" required><br><br>
    <textarea id="message" placeholder="Your Message" required></textarea><br><br>
    <button type="submit">Send</button>
  </form>

  <script>
    // ** SECURITY NOTE: The passwords and webhooks are exposed in this client-side code. **
    
    // Webhook URLs mapped to their required passwords
    const PASSWORD_TO_CHANNEL = {
      "discord": {
        name: "Announcement",
        url: "https://discord.com/api/webhooks/1423498115180400722/8qWysEc0A12rmf3856Hlfd6201O8vL-AEjSzmJ3IFrwWZIfrHUDCq979tLUs_gYTJN32"
      },
      "game": {
        name: "Gamerfest",
        url: "https://discord.com/api/webhooks/1423495074796535908/JBoVezEtQybpYu3lSfVVwVX174CAeOLzQbmM6zC7P11EBy3QRnZPdscqBYpASqufF"
      }
    };

    document.getElementById("discordForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const enteredPassword = document.getElementById("password").value;
      const channelInfo = PASSWORD_TO_CHANNEL[enteredPassword];

      // 1. Password/Channel Check
      if (!channelInfo) {
        alert("Incorrect password or unknown channel password. Message not sent.");
        return; // Stop the function if the password is wrong
      }
      
      const webhookURL = channelInfo.url;
      const channelName = channelInfo.name;

      // If the password is correct, proceed with sending the message
      const username = document.getElementById("username").value;
      const message = document.getElementById("message").value;

      fetch(webhookURL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          username: username,
          content: message
        })
      })
      .then(response => {
        if(response.ok){
          alert(`Message sent to ${channelName} on Discord!`);
          document.getElementById("discordForm").reset();
        } else {
          // Attempt to show a more descriptive error from Discord's API
          response.json().then(data => {
            alert(`Error sending message: ${data.message || response.statusText}`);
          }).catch(() => {
            alert("Error sending message. Please check the webhook URL.");
          });
        }
      })
      .catch(error => {
          console.error('Fetch error:', error);
          alert("Network error. Could not connect to Discord.");
      });
    });
  </script>
</body>
</html>
